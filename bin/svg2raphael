#!/usr/bin/env ruby

require 'svg2raphael/svg'

if !ARGV.first
  STDERR.puts "You need to specify an SVG file to convert!"
  exit Errno::EINVAL::Errno
end

if ['-h','-help','--help'].any? {|arg| ARGV[0] == arg}
  STDOUT.puts "Usage: svg2raphael <input> ..."
end

ARGV.each do |file|
  begin
    svg = Raphael::SVG.new file

    File.open(svg.filename+".js", "w") {|f| f.write svg.to_js}
    STDOUT.puts "Processed #{file}"
  rescue
    STDERR.puts "#{file} failed"
  end
end